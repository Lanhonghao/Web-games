var SNAKE=SNAKE||{};SNAKE.addEventListener=(function(){if(window.addEventListener){return function(d,c,b,a){d.addEventListener(c,b,a)}}else{if(window.attachEvent){return function(c,b,a){c.attachEvent("on"+b,a)}}}})();SNAKE.removeEventListener=(function(){if(window.removeEventListener){return function(d,c,b,a){d.removeEventListener(c,b,a)}}else{if(window.detachEvent){return function(c,b,a){c.detachEvent("on"+b,a)}}}})();SNAKE.Snake=SNAKE.Snake||(function(){var a=0;var b=[];var d=function(){this.elm=null;this.elmStyle=null;this.row=-1;this.col=-1;this.xPos=-1000;this.yPos=-1000;this.next=null;this.prev=null};function c(h){var g=0,e=0,f;for(f in h){if(h[f].elm.currentStyle){e=parseFloat(h[f].elm.style["z-index"],10)}else{if(window.getComputedStyle){e=parseFloat(document.defaultView.getComputedStyle(h[f].elm,null).getPropertyValue("z-index"),10)}}if(!isNaN(e)&&e>g){g=e}}return(g+1)}return function(g){if(!g||!g.playingBoard){return}var s=this,t=g.playingBoard,f=a++,i=5,p=[],r=1,h=[0,1,0,-1],k=[-1,0,1,0],e=[],n=[],q=75,j=false,o=false;q=75;s.snakeBody={};s.snakeBody.b0=new d();s.snakeBody.b0.row=g.startRow||1;s.snakeBody.b0.col=g.startCol||1;s.snakeBody.b0.xPos=s.snakeBody.b0.row*t.getBlockWidth();s.snakeBody.b0.yPos=s.snakeBody.b0.col*t.getBlockHeight();s.snakeBody.b0.elm=m();s.snakeBody.b0.elmStyle=s.snakeBody.b0.elm.style;t.getBoardContainer().appendChild(s.snakeBody.b0.elm);s.snakeBody.b0.elm.style.left=s.snakeBody.b0.xPos+"px";s.snakeBody.b0.elm.style.top=s.snakeBody.b0.yPos+"px";s.snakeBody.b0.next=s.snakeBody.b0;s.snakeBody.b0.prev=s.snakeBody.b0;s.snakeLength=1;s.snakeHead=s.snakeBody.b0;s.snakeTail=s.snakeBody.b0;s.snakeHead.elm.className=s.snakeHead.elm.className.replace(/\bsnake-snakebody-dead\b/,"");s.snakeHead.elm.className+=" snake-snakebody-alive";function m(){var u=document.createElement("div");u.className="snake-snakebody-block";u.style.left="-1000px";u.style.top="-1000px";u.style.width=t.getBlockWidth()+"px";u.style.height=t.getBlockHeight()+"px";return u}function l(u){var x;var w=m();for(var v=1;v<u;v++){x=new d();x.elm=w.cloneNode(true);x.elmStyle=x.elm.style;t.getBoardContainer().appendChild(x.elm);b[b.length]=x}x=new d();x.elm=w;t.getBoardContainer().appendChild(x.elm);b[b.length]=x}s.setPaused=function(u){o=u};s.getPaused=function(){return o};s.handleArrowKeys=function(v){if(j||o){return}var w=s.snakeLength;var u=p[0]||r;switch(v){case 37:case 65:if(u!==1||w===1){p.unshift(3)}break;case 38:case 87:if(u!==2||w===1){p.unshift(0)}break;case 39:case 68:if(u!==3||w===1){p.unshift(1)}break;case 40:case 83:if(u!==0||w===1){p.unshift(2)}break}};s.go=function(){var w=s.snakeHead,u=s.snakeTail,x=r,v=t.grid;if(o===true){setTimeout(function(){s.go()},q);return}s.snakeTail=u.prev;s.snakeHead=u;if(v[u.row]&&v[u.row][u.col]){v[u.row][u.col]=0}if(p.length){x=r=p.pop()}u.col=w.col+h[x];u.row=w.row+k[x];u.xPos=w.xPos+e[x];u.yPos=w.yPos+n[x];if(!u.elmStyle){u.elmStyle=u.elm.style}u.elmStyle.left=u.xPos+"px";u.elmStyle.top=u.yPos+"px";if(v[u.row][u.col]===0){v[u.row][u.col]=1;setTimeout(function(){s.go()},q)}else{if(v[u.row][u.col]>0){s.handleDeath()}else{if(v[u.row][u.col]===t.getGridFoodValue()){v[u.row][u.col]=1;s.eatFood();setTimeout(function(){s.go()},q)}}}};s.eatFood=function(){if(b.length<=i){l(i*2)}var x=b.splice(0,i);var w=x.length,v,u=s.snakeTail;while(w--){v="b"+s.snakeLength++;s.snakeBody[v]=x[w];s.snakeBody[v].prev=u;s.snakeBody[v].elm.className=s.snakeHead.elm.className.replace(/\bsnake-snakebody-dead\b/,"");s.snakeBody[v].elm.className+=" snake-snakebody-alive";u.next=s.snakeBody[v];u=s.snakeBody[v]}s.snakeTail=s.snakeBody[v];s.snakeTail.next=s.snakeHead;s.snakeHead.prev=s.snakeTail;t.foodEaten()};s.handleDeath=function(){function u(){var v=localStorage.jsSnakeHighScore;if(v==undefined){localStorage.setItem("jsSnakeHighScore",s.snakeLength)}if((s.snakeLength>v)&&(s.snakeLength<1000)){alert("Congratulations! You have beaten your previous high score, which was "+v+". Not enough to save Abache and claim the 12.000.000$ though!");localStorage.setItem("jsSnakeHighScore",s.snakeLength)}else{if(s.snakeLength>=1000){alert("Congratulations! You have unlocked the next step! Please find @OlusegunObasan7 to proceed.")}}}u();s.snakeHead.elm.style.zIndex=c(s.snakeBody);s.snakeHead.elm.className=s.snakeHead.elm.className.replace(/\bsnake-snakebody-alive\b/,"");s.snakeHead.elm.className+=" snake-snakebody-dead";j=true;t.handleDeath();p.length=0};s.rebirth=function(){j=false};s.reset=function(){if(j===false){return}var x=[],w=s.snakeHead.next,u;while(w!==s.snakeHead){u=w.next;w.prev=null;w.next=null;x.push(w);w=u}s.snakeHead.next=s.snakeHead;s.snakeHead.prev=s.snakeHead;s.snakeTail=s.snakeHead;s.snakeLength=1;for(var v=0;v<x.length;v++){x[v].elm.style.left="-1000px";x[v].elm.style.top="-1000px";x[v].elm.className=s.snakeHead.elm.className.replace(/\bsnake-snakebody-dead\b/,"");x[v].elm.className+=" snake-snakebody-alive"}b.concat(x);s.snakeHead.elm.className=s.snakeHead.elm.className.replace(/\bsnake-snakebody-dead\b/,"");s.snakeHead.elm.className+=" snake-snakebody-alive";s.snakeHead.row=g.startRow||1;s.snakeHead.col=g.startCol||1;s.snakeHead.xPos=s.snakeHead.row*t.getBlockWidth();s.snakeHead.yPos=s.snakeHead.col*t.getBlockHeight();s.snakeHead.elm.style.left=s.snakeHead.xPos+"px";s.snakeHead.elm.style.top=s.snakeHead.yPos+"px"};l(i*2);e[0]=0;e[1]=t.getBlockWidth();e[2]=0;e[3]=-1*t.getBlockWidth();n[0]=-1*t.getBlockHeight();n[1]=0;n[2]=t.getBlockHeight();n[3]=0}})();SNAKE.Food=SNAKE.Food||(function(){var b=0;function a(c,d){return Math.floor(Math.random()*(d+1-c))+c}return function(c){if(!c||!c.playingBoard){return}var g=this;var i=c.playingBoard;var h,f;var e=b++;var d=document.createElement("div");d.setAttribute("id","snake-food-"+e);d.className="snake-food-block";d.style.width=i.getBlockWidth()+"px";d.style.height=i.getBlockHeight()+"px";d.style.left="-1000px";d.style.top="-1000px";i.getBoardContainer().appendChild(d);g.getFoodElement=function(){return d};g.randomlyPlaceFood=function(){if(i.grid[h]&&i.grid[h][f]===i.getGridFoodValue()){i.grid[h][f]=0}var n=0,m=0,j=0;var k=i.grid.length-1;var l=i.grid[0].length-1;while(i.grid[n][m]!==0){n=a(1,k);m=a(1,l);j++;if(j>20000){n=-1;m=-1;break}}i.grid[n][m]=i.getGridFoodValue();h=n;f=m;d.style.top=n*i.getBlockHeight()+"px";d.style.left=m*i.getBlockWidth()+"px"}}})();SNAKE.Board=SNAKE.Board||(function(){var c=0;function d(h){var g=0,e=0,f;for(f in h){if(h[f].elm.currentStyle){e=parseFloat(h[f].elm.style["z-index"],10)}else{if(window.getComputedStyle){e=parseFloat(document.defaultView.getComputedStyle(h[f].elm,null).getPropertyValue("z-index"),10)}}if(!isNaN(e)&&e>g){g=e}}return(g+1)}function b(){var e=0;if(typeof window.innerWidth==="number"){e=window.innerWidth}else{if(document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)){e=document.documentElement.clientWidth}else{if(document.body&&(document.body.clientWidth||document.body.clientHeight)){e=document.body.clientWidth}}}return e}function a(){var e=0;if(typeof window.innerHeight==="number"){e=window.innerHeight}else{if(document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)){e=document.documentElement.clientHeight}else{if(document.body&&(document.body.clientWidth||document.body.clientHeight)){e=document.body.clientHeight}}}return e}return function(A){var D=this,B=c++,C=A||{},m=250,k=250,h=20,e=20,o=-1,n,z,w=1,l,i=false,x,v,j,g,u,r,s;D.grid=[];function t(){v=document.createElement("div");v.setAttribute("id","playingField");v.className="snake-playing-field";SNAKE.addEventListener(v,"click",function(){x.focus()},false);s=document.createElement("div");s.className="snake-pause-screen";s.innerHTML="<div style='padding:10px;'>[Paused]<p/>Press [space] to unpause.</div>";j=document.createElement("div");j.className="snake-panel-component";j.innerHTML="<a href='http://patorjk.com/blog/software/' class='snake-link'>more patorjk.com apps</a> - <a href='https://github.com/patorjk/JavaScript-Snake' class='snake-link'>source code</a>";g=document.createElement("div");g.className="snake-panel-component";g.innerHTML="Length: 1";u=p();r=y();SNAKE.addEventListener(x,"keyup",function(E){if(!E){var E=window.event}E.cancelBubble=true;if(E.stopPropagation){E.stopPropagation()}if(E.preventDefault){E.preventDefault()}return false},false);x.className="snake-game-container";s.style.zIndex=10000;x.appendChild(s);x.appendChild(v);x.appendChild(g);x.appendChild(u);x.appendChild(r);z=new SNAKE.Snake({playingBoard:D,startRow:2,startCol:2});n=new SNAKE.Food({playingBoard:D});u.style.zIndex=1000}function q(){return m*D.getBlockWidth()}function f(){return k*D.getBlockHeight()}function p(){var G=document.createElement("div");G.id="sbWelcome"+B;G.className="snake-welcome-dialog";var F=document.createElement("div");var J="";if(C.fullScreen){J="On Windows, press F11 to play in Full Screen mode."}F.innerHTML="JavaScript Snake<p></p>Use the <strong>arrow keys</strong> on your keyboard to play the game. "+J+"<p></p>";var I=document.createElement("button");I.appendChild(document.createTextNode("Play Game"));var H=function(){SNAKE.removeEventListener(window,"keyup",E,false);G.style.display="none";D.setBoardState(1);D.getBoardContainer().focus()};var E=function(K){if(!K){var K=window.event}var L=(K.which)?K.which:K.keyCode;if(L===32||L===13){H()}};SNAKE.addEventListener(window,"keyup",E,false);SNAKE.addEventListener(I,"click",H,false);G.appendChild(F);G.appendChild(I);return G}function y(){var F=document.createElement("div");F.id="sbTryAgain"+B;F.className="snake-try-again-dialog";var G=document.createElement("div");G.innerHTML="JavaScript Snake<p></p>You died :(.<p></p>";var I=document.createElement("button");I.appendChild(document.createTextNode("Play Again?"));var H=function(){F.style.display="none";D.resetBoard();D.setBoardState(1);D.getBoardContainer().focus()};var E=function(J){if(w!==0||F.style.display!=="block"){return}if(!J){var J=window.event}var K=(J.which)?J.which:J.keyCode;if(K===32||K===13){H()}};SNAKE.addEventListener(window,"keyup",E,true);SNAKE.addEventListener(I,"click",H,false);F.appendChild(G);F.appendChild(I);return F}D.setPaused=function(E){i=E;z.setPaused(E);if(i){s.style.display="block"}else{s.style.display="none"}};D.getPaused=function(){return i};D.resetBoard=function(){SNAKE.removeEventListener(x,"keydown",l,false);z.reset();g.innerHTML="Length: 1";D.setupPlayingField()};D.getBoardState=function(){return w};D.setBoardState=function(E){w=E};D.getGridFoodValue=function(){return o};D.getPlayingFieldElement=function(){return v};D.setBoardContainer=function(E){if(typeof E==="string"){E=document.getElementById(E)}if(E===x){return}x=E;v=null;D.setupPlayingField()};D.getBoardContainer=function(){return x};D.getBlockWidth=function(){return h};D.getBlockHeight=function(){return e};D.setupPlayingField=function(){if(!v){t()}var L,O;if(C.fullScreen===true){cTop=0;cLeft=0;L=b()-5;O=a()-5;document.body.style.backgroundColor="#000000"}else{cTop=C.top;cLeft=C.left;L=C.width;O=C.height}var N=D.getBlockWidth()*2+(L%D.getBlockWidth());var G=Math.min(q()-N,L-N);var K=D.getBlockHeight()*3+(O%D.getBlockHeight());var M=Math.min(f()-K,O-K);x.style.left=cLeft+"px";x.style.top=cTop+"px";x.style.width=L+"px";x.style.height=O+"px";v.style.left=D.getBlockWidth()+"px";v.style.top=D.getBlockHeight()+"px";v.style.width=G+"px";v.style.height=M+"px";var I=K-D.getBlockHeight();var H=D.getBlockHeight()+M+Math.round((I-30)/2)+"px";j.style.top=H;j.style.width="450px";j.style.left=Math.round(L/2)-Math.round(450/2)+"px";g.style.top=H;g.style.left=L-120+"px";if(L<700){j.style.display="none"}else{j.style.display="block"}D.grid=[];var E=G/D.getBlockWidth()+2;var J=M/D.getBlockHeight()+2;for(var P=0;P<J;P++){D.grid[P]=[];for(var F=0;F<E;F++){if(F===0||P===0||F===(E-1)||P===(J-1)){D.grid[P][F]=1}else{D.grid[P][F]=0}}}n.randomlyPlaceFood();snakeSpeed=75;l=function(Q){if(!Q){var Q=window.event}var R=(Q.which)?Q.which:Q.keyCode;if(D.getBoardState()===1){if(!(R>=37&&R<=40)&&!(R===87||R===65||R===83||R===68)){return}SNAKE.removeEventListener(x,"keydown",l,false);l=function(S){if(!S){var S=window.event}var T=(S.which)?S.which:S.keyCode;if(T===32){if(D.getBoardState()!=0){D.setPaused(!D.getPaused())}}z.handleArrowKeys(T);S.cancelBubble=true;if(S.stopPropagation){S.stopPropagation()}if(S.preventDefault){S.preventDefault()}return false};SNAKE.addEventListener(x,"keydown",l,false);z.rebirth();z.handleArrowKeys(R);D.setBoardState(2);z.go()}Q.cancelBubble=true;if(Q.stopPropagation){Q.stopPropagation()}if(Q.preventDefault){Q.preventDefault()}return false};SNAKE.addEventListener(x,"keydown",l,false)};D.foodEaten=function(){g.innerHTML="Length: "+z.snakeLength;n.randomlyPlaceFood()};D.handleDeath=function(){var E=Math.max(d(z.snakeBody),d({tmp:{elm:n.getFoodElement()}}));x.removeChild(r);x.appendChild(r);r.style.zIndex=E;r.style.display="block";D.setBoardState(0)};C.fullScreen=(typeof C.fullScreen==="undefined")?false:C.fullScreen;C.top=(typeof C.top==="undefined")?0:C.top;C.left=(typeof C.left==="undefined")?0:C.left;C.width=(typeof C.width==="undefined")?400:C.width;C.height=(typeof C.height==="undefined")?400:C.height;if(C.fullScreen){SNAKE.addEventListener(window,"resize",function(){D.setupPlayingField()},false)}D.setBoardState(0);if(C.boardContainer){D.setBoardContainer(C.boardContainer)}}})();function getHighScore(){document.getElementById("high-score").addEventListener("click",function(){if(localStorage.jsSnakeHighScore==undefined){alert("You have not played this game yet!")}else{alert("Your current high score is "+localStorage.jsSnakeHighScore+".")}})};